html
  head
    title Support - AliasZap
    link(href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css', rel='stylesheet')
    link(href='/css/styles.css', rel='stylesheet')
  body
    nav.navbar.navbar-expand-lg.navbar-light.bg-light
      .container
        a.navbar-brand(href='/') AliasZap
        button.navbar-toggler(type='button', data-bs-toggle='collapse', data-bs-target='#navbarNav')
          span.navbar-toggler-icon
        #navbarNav.collapse.navbar-collapse
          ul.navbar-nav.ms-auto
            li.nav-item
              a.nav-link(href='/dashboard') Dashboard
            if user.plan !== 'free'
              li.nav-item
                a.nav-link(href='/custom-domains') Custom Domains
            li.nav-item
              a.nav-link(href='/subscribe') Upgrade
            li.nav-item
              a.nav-link.active(href='/support') Support
            li.nav-item
              a.nav-link(href='/logout') Logout
            li.nav-item
              button#darkModeToggle.btn.btn-link.nav-link Dark Mode
    .container.mt-5
      .row
        .col-md-10.offset-md-1
          h2.mb-4 Support Tickets
          if error
            .alert.alert-danger= error
          if success
            .alert.alert-success= success
          h4.mb-3 Submit a Support Ticket
          form(method='POST', action='/support')
            input(type='hidden', name='_csrf', value=csrfToken)
            .mb-3
              label.form-label(for='subject') Subject
              input.form-control(type='text', name='subject', id='subject', required)
            .mb-3
              label.form-label(for='message') Message
              textarea.form-control(name='message', id='message', rows='5', required)
            button.btn.btn-primary(type='submit') Submit Ticket
          hr.mt-4
          h4.mb-3 Your Tickets
          if tickets && tickets.length > 0
            .table-responsive.mt-4
              table.table.table-striped
                thead
                  tr
                    th Subject
                    th Message
                    th Priority
                    th Status
                    th Created
                    th Response
                tbody
                  each ticket in tickets
                    tr
                      td= ticket.subject
                      td= ticket.message
                      td= ticket.priority ? 'Yes' : 'No'
                      td= ticket.status
                      td= ticket.createdAt ? new Date(ticket.createdAt).toDateString() : 'N/A'
                      td= ticket.response || 'No response yet.'
          else
            p.text-muted No support tickets submitted yet.