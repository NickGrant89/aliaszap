doctype html
html(lang="en")
  head
    title AliasZap - #{title}
    meta(name='viewport' content='width=device-width, initial-scale=1.0')
    meta(name='description' content='Protect your inbox with disposable email aliases.')
    meta(name='keywords' content='email alias, privacy, spam protection, disposable email')
    link(rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css')
    link(rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css')
    link(rel='stylesheet' href='/stylesheets/style.css')
  body
    // Navigation Bar
    nav.navbar.navbar-expand-lg.navbar-light.bg-light
      .container
        a.navbar-brand(href='/')
          img(src='/images/logo.png' alt='AliasZap Logo' height='40')
        button.navbar-toggler(type='button' data-bs-toggle='collapse' data-bs-target='#navbarNav' aria-controls='navbarNav' aria-expanded='false' aria-label='Toggle navigation')
          span.navbar-toggler-icon
        #navbarNav.collapse.navbar-collapse
          ul.navbar-nav.ms-auto
            if user
              li.nav-item
                a.nav-link(href='/dashboard') Dashboard
              li.nav-item
                a.nav-link(href='/support') Support
              li.nav-item
                a.nav-link(href='/logout') Logout
            else
              li.nav-item
                a.nav-link(href='/login') Login
              li.nav-item
                a.nav-link(href='/signup') Sign Up
        // Debug log (remove after testing)
        script.
          document.addEventListener('DOMContentLoaded', () => {
            console.log('Navbar loaded, toggler target:', document.querySelector('#navbarNav'));
            document.querySelector('.navbar-toggler').addEventListener('click', () => {
              console.log('Toggler clicked, collapse state:', document.querySelector('#navbarNav').classList.contains('show'));
            });
          });

    // Main Content
    .container.mt-4
      if error
        .alert.alert-danger #{error}
      if success
        .alert.alert-success #{success}
      block content

    // Footer
    footer.bg-dark.text-white.text-center.py-4.mt-5
      .container
        img(src='/images/footer-logo.png' alt='AliasZap Footer Logo' height='30' class='mb-2')
        p.mb-2.small Â© 2025 AliasZap. All rights reserved.
        .mb-2
          a.text-white.me-3(href='/support') Support
          a.text-white.me-3(href='#') Privacy Policy
          a.text-white(href='#') Terms of Service
        p.mb-0.small Follow us: 
          a.text-white.me-2(href='https://twitter.com/aliaszap')
            i.fab.fa-twitter
          a.text-white(href='https://facebook.com/aliaszap')
            i.fab.fa-facebook-f

    // Scripts (moved to bottom for better loading)
    script(src='https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js')